import statsmodels.api as sm
import numpy as np
import scipy.stats as stats

# Данные
n1 = 15550
n2 = 15550
conv1 = 0.0105  # 1.05%
conv2 = 0.0147  # 1.47%

# Вычисление стандартных ошибок
se1 = np.sqrt(conv1 * (1 - conv1) / n1)
se2 = np.sqrt(conv2 * (1 - conv2) / n2)

# Стандартная ошибка разности
se_diff = np.sqrt(se1**2 + se2**2)

# Вычисление Z-значения
z_value = (conv1 - conv2) / se_diff

# Уровень значимости (alpha = 0.05)
alpha = 0.05

# Вычисление критического значения Z
z_critical = stats.norm.ppf(1 - alpha / 2)

# Печать результатов
print(f'Z-значение: {z_value}')
print(f'Критическое значение Z: {z_critical}')

# Проверка статистической значимости и вывод рекомендаций
if np.abs(z_value) > z_critical:
    print('Есть статистически значимые различия.')
    print('Рекомендация: Рассмотрите упрощение формы заказа как эффективное изменение, способствующее увеличению конверсий.')
else:
    print('Статистически значимых различий нет.')
    print('Рекомендация: Пожалуйста, продолжайте мониторить конверсии и рассмотрите другие возможные улучшения для повышения результатов.')

